<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        // for some reason, on production, does not parse URLs correctly but it works just fine on localhost for some reason
        var base = document.createElement ("base")
        base.href = window.location.href.slice (window.location.href.length - 1) == "/" ? window.location.href : window.location.href + "/"
        document.getElementsByTagName ("head")[0].appendChild (base)
    </script>
    <!-- <base href="/hdlwave"> -->
    <title>HDLwave</title>
    <link rel="stylesheet" href="assets/fontawesome/css/all.css">
    <link rel="stylesheet" href="assets/index.css">
    <script src="assets/fontawesome/js/all.js"></script>
</head>
<body>
    <header><p style="font-size: calc(0.75vw + 1vh)">HDLwave<sub style="font-size: calc(0.35vw + 1vh)">&nbsp;beta</sub></p></header>
    <div id="settingheader">
        <div style="height: 100%; width: 100%; display: flex; flex-direction: row; align-items: center; justify-content: space-between;">
            <div style="display: flex; flex-direction: column; align-items: flex-start; justify-content: center;">
                <p style="font-size: calc(0.25vw + 1vh); margin: 0 0 0 calc(0.5vw)">Version 0.2.0</p>
                <p style="font-size: calc(0.25vw + 1vh); margin: 0 0 0 calc(0.5vw)">This is Niraj's mess!</p>
            </div>
            <div>
                <div id="dropdown">
                    <button class="btn" id="dropbtn">Settings</button>
                    <div id="dropcontent">
                        <div class="item">
                            <p style="margin: 0 0 0 calc(0.5vw)">Dark Mode</p>
                            <label class="switch">
                                <input id="darkmode" checked type="checkbox"></input>
                                <span class="slider"></span>
                            </label>
                        </div>
                        <!-- <div class="item">
                            <p style="margin: 0 0 0 calc(0.5vw)">Show waveform</p>
                            <label class="switch">
                                <input id="waveview" type="checkbox"></input>
                                <span class="slider"></span>
                            </label>
                        </div> -->
                        <div class="item">
                            <p style="margin: 0 0 0 calc(0.5vw)">Select testbench</p>
                            <div id="testlist">
                                <div class="subbtn" id="droptest">Select...</div>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn" id="btn_simulate">Simulate</button>
                <button class="btn" onclick="window.location.href = '/user/logout'" id="btn_logout">Log Out</button>
                <script>
                    // look, there's no point going to /user/logout on localhost or my personal site - they do nothing!
                    // just hide the button if not running from verilog.ecn
                    if (!window.location.href.startsWith ('https://verilog.ecn.purdue.edu'))
                        document.getElementById ("btn_logout").style.display = 'none'
                </script>
            </div>
        </div>
    </div>
    <div style="width: 100%; height: 90vh; display: flex; flex-direction: column; align-items: center; justify-content: flex-start;">
        <div id="codebase">
            <div id="codeview"></div>
        </div>
        <div id="waveviewer">
            <div id="wavesettings">
                <p class="action" onclick="expandAll()" id="action_expand_all">Expand all</p>
                <p class="action" onclick="collapseAll()" id="action_collapse_all">Collapse all</p>
                <div style="display: flex; flex-direction: row; align-items: center; justify-content: center;">
                    <p class="action" onclick="zoomOut(event)" style="margin: 0 0.25vw 0 0.8vw" id="action_zoom_out">-</p>
                    <p style="margin: 0 0.25vw 0 0.25vw; font-size: calc(0.2vw + 1vh);" id="zoom_level">100%</p>
                    <p class="action" onclick="zoomIn(event)" style="margin: 0 0.8vw 0 0.25vw" id="action_zoom_in">+</p>
                </div>
                <button class="sigbtn action" onclick="toggleSignalPanel()" id="signallistbtn" style="height: auto; opacity: 1">Show/hide signals</button>
            </div>
            <div id="waveforms"></div>
            <div style="width: 100%; margin-top: 1vh;"></div>
            <p id="waveidle">No waveform has been generated yet.</p>
        </div>
    </div>
    <div class="overlay" id="overlay"></div>
    <div class="overlay" id="divSignalList">
        <div id="panelSignalList">
            <div style="width: 100%; display: flex; justify-content: flex-end;">
                <i class="fa fa-window-close" style="color: var(--text-color)" onclick="toggleSignalPanel()" aria-hidden="true"></i>
            </div>
            <h1>Signal view</h1>
            <div style="display: flex; flex-direction: column; align-items: center; justify-content: space-evenly; width: 100%">
                <p style="font-size: calc(0.35vw + 1vh); text-align: center;">Click on a signal to show/hide it on the waveform.  You can also show or hide all signals at once (this lags with a large number of signals, so wait for a bit after clicking).</p>
                <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-evenly; width: 100%">
                    <p onclick="Array.from (document.getElementsByClassName ('signalPick')).reverse().map (e => { if (e.querySelector ('div').innerHTML == '') {var evt = new Event ('toggle'); e.dispatchEvent (evt); toggleSignal (evt) } }); window.multiSignalToggle = false" style="padding: 0.6%; border: 1px solid var(--line-color); border-radius: 4px; cursor: pointer">Show all signals</p>
                    <p onclick="Array.from (document.getElementsByClassName ('signalPick')).reverse().map (e => { if (e.querySelector ('div').innerHTML != '') {var evt = new Event ('toggle'); e.dispatchEvent (evt); toggleSignal (evt) } }); window.multiSignalToggle = false" style="padding: 0.6%; border: 1px solid var(--line-color); border-radius: 4px; cursor: pointer">Hide all signals</p>
                </div>
            </div>
            <div id="signalList"></div>
        </div>
    </div>
</body>
<script src="assets/ace/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="assets/split.min.js"></script>
<script src="assets/index.js"></script>
</html>
